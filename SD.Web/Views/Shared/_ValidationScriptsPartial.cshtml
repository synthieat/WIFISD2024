<script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
<script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>

<!-- CLDR -->
<script src="~/lib/cldr.0.5.1/cldr.js"></script>
<script src="~/lib/cldr.0.5.1/cldr/event.js"></script>
<script src="~/lib/cldr.0.5.1/cldr/supplemental.js"></script>
<!-- Globalize -->
<script src="~/lib/globalize.1.4.2/globalize.js"></script>
<script src="~/lib/globalize.1.4.2/globalize/number.js"></script>
<script src="~/lib/globalize.1.4.2/globalize/date.js"></script>
<!-- $ validate -->
<environment include="Development">
    <script src="~/lib/jquery-validation-globalize.1.1.0/jquery.validate.globalize.js"></script>
</environment>
<environment exclude="Development">
    <script src="~/lib/jquery-validation-globalize.1.1.0/jquery.validate.globalize.min.js"></script>
 </environment>
<!-- fetch files
     Load latest cldr-data => npm install cldr-data
-->
<script>
    $.when(
        $.getJSON("/lib/cldr-data/supplemental/likelySubtags.json"),
        $.getJSON("/lib/cldr-data/supplemental/numberingSystems.json"),
        $.getJSON("/lib/cldr-data/supplemental/timeData.json"),
        $.getJSON("/lib/cldr-data/supplemental/weekData.json"),
        $.getJSON("/lib/cldr-data/main/@ViewBag.LocaleName/numbers.json"),
        $.getJSON("/lib/cldr-data/main/@ViewBag.LocaleName/ca-gregorian.json"),
        $.getJSON("/lib/cldr-data/main/@ViewBag.LocaleName/timeZoneNames.json"),
    ).then(function () {
        console.log("start slicing");
        return [].slice.apply(arguments, [0]).map(function (result) {
            console.log("slicing done");
            return result[0];
        });
    }).then(Globalize.load).then(function () {
        Globalize.locale("@(ViewBag.LocaleName)");
        console.log("Locale set to de");
    }).then(console.log("LOADED EVERYTHING"));
</script>
